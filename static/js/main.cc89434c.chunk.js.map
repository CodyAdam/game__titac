{"version":3,"sources":["features/board/Lines.module.css","features/board/Board.module.css","app/hooks.ts","features/board/boardSlice.ts","features/board/Control.tsx","features/board/Lines.tsx","features/board/Board.tsx","features/board/Score.tsx","App.tsx","app/store.ts","index.tsx"],"names":["module","exports","useAppDispatch","useDispatch","useAppSelector","useSelector","initialState","score","p1","p2","turn","Math","random","winner","grid","slotsIndex","value","boardSlice","createSlice","name","reducers","playAt","state","action","cell","payload","player","push","used","indices","forEach","lineFound","tiles","index","found","tile","find","item","getLine","console","log","i","length","setUsed","getScoreGrid","getWinner","reset","actions","selectGrid","board","present","getSymbol","Control","dispatch","canUndo","past","canRedo","future","className","styles","controlBar","controlButton","onClick","ActionCreators","undo","disabled","controlButtonInside","controlButtonContainer","redo","H","W","COEF","Lines","lines","sorted","tr","pt1","pt2","values","mr","br","lc","mc","rc","bltr","brtl","line","sortLines","canvasRef","useRef","useEffect","current","c","getContext","clearRect","Object","keys","dir","x1","y1","x2","y2","elem","beginPath","moveTo","lineWidth","strokeStyle","lineTo","closePath","stroke","ref","canvas","height","width","Board","header","winning","map","items","subIndex","notfull","under","upper","inside","container","subHeader","Score","props","scoreContainer","scoreHeader","App","store","configureStore","reducer","undoable","boardReducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cc89434c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"Lines_canvas__3njqj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Board_container__e7AOm\",\"subHeader\":\"Board_subHeader__22W3O\",\"header\":\"Board_header__3a_-8\",\"winning\":\"Board_winning__2ndj0\",\"grid\":\"Board_grid__2S-vE\",\"cell\":\"Board_cell__3urXG\",\"notfull\":\"Board_notfull__3vcoS\",\"upper\":\"Board_upper__1wxc3\",\"under\":\"Board_under__2gw4d\",\"inside\":\"Board_inside__3CQrY\",\"item\":\"Board_item__34jtE\",\"used\":\"Board_used__3yTAm\",\"controlBar\":\"Board_controlBar__q1_iT\",\"controlButton\":\"Board_controlButton__1SIAm\",\"controlButtonInside\":\"Board_controlButtonInside__1Mwrb\",\"scoreContainer\":\"Board_scoreContainer__1GMLN\",\"scoreHeader\":\"Board_scoreHeader__31EcL\"};","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState, AppThunk } from '../../app/store';\nimport { Direction } from './Lines';\n\nexport interface BoardState {\n  score: { p1: Array<Direction>, p2: Array<Direction> }\n  turn: 1 | 2\n  winner: false | 1 | 2\n  grid: Array<Tile>\n}\n\nexport interface Tile {\n  slotsIndex: number,\n  value: Array<Item>\n}\n\nexport interface Item { used: boolean, player: 1 | 2 }\n\nconst MAX_PER_TILE = 3;\nconst SCORE_TO_WIN = 3;\n\nconst initialState: BoardState = {\n  score: { p1: [], p2: [] },\n  turn: Math.random() < 0.5 ? 1 : 2,\n  winner: false,\n  grid: [\n    { slotsIndex: 0, value: [] },\n    { slotsIndex: 0, value: [] },\n    { slotsIndex: 0, value: [] },\n    { slotsIndex: 0, value: [] },\n    { slotsIndex: 0, value: [] },\n    { slotsIndex: 0, value: [] },\n    { slotsIndex: 0, value: [] },\n    { slotsIndex: 0, value: [] },\n    { slotsIndex: 0, value: [] },\n  ]\n}\n\nexport const boardSlice = createSlice({\n  name: 'board',\n  initialState,\n  reducers: {\n    playAt: (state, action: PayloadAction<number>) => {\n      const cell = action.payload;\n      const player = state.turn;\n      if (state.grid[cell].slotsIndex < MAX_PER_TILE) {\n        state.grid[cell].slotsIndex++;\n        state.grid[cell].value.push({ used: false, player });\n        state.turn = player === 1 ? 2 : 1;\n        const { score, grid } = getScoreGrid(state);\n        state.score = score;\n        state.grid = grid;\n        state.winner = getWinner(state);\n      }\n    },\n    reset: (state, action: PayloadAction<1 | 2>) => {\n      state = { ...initialState }\n      state.turn = action.payload;\n      return state\n    }\n  }\n});\n\nexport const { playAt, reset } = boardSlice.actions;\n\nexport const selectGrid = (state: RootState) => state.board.present.grid;\n\nexport default boardSlice.reducer;\n\n// HELPERS\n\nfunction getScoreGrid(state: BoardState): { score: { p1: Array<Direction>, p2: Array<Direction> }, grid: Array<Tile> } {\n  const p1: Array<Direction> = state.score.p1;\n  const p2: Array<Direction> = state.score.p2;\n  let grid = state.grid;\n\n  const lines: Array<{ name: Direction, indices: Array<number> }> = [{ name: \"tr\", indices: [0, 1, 2] },\n  { name: \"mr\", indices: [3, 4, 5] },\n  { name: \"br\", indices: [6, 7, 8] },\n  { name: \"lc\", indices: [0, 3, 6] },\n  { name: \"mc\", indices: [1, 4, 7] },\n  { name: \"rc\", indices: [2, 5, 8] },\n  { name: \"brtl\", indices: [0, 4, 8] },\n  { name: \"bltr\", indices: [6, 4, 2] }\n  ];\n\n  lines.forEach(({ name, indices }) => {\n    const lineFound = getLine(grid, indices);\n    if (lineFound) {\n      grid = setUsed(grid, indices, lineFound);\n      if (lineFound === 1)\n        p1.push(name);\n      else p2.push(name)\n    }\n  })\n  return { score: { p1, p2 }, grid };\n}\nfunction setUsed(grid: Array<Tile>, indices: Array<number>, player: 1 | 2): Array<Tile> {\n  console.log(\"SetUsed Called\");\n\n  indices.forEach(index => {\n    for (let i = 0; i < grid[index].value.length; i++) {\n      const item = grid[index].value[i];\n      if (item.player === player && !item.used) {\n        console.log(\"         Used set to true at : \" + index + \"  \" + i);\n\n        grid[index].value[i].used = true\n        break;\n      }\n    }\n  })\n  return grid;\n}\n\nfunction getLine(grid: Array<Tile>, indices: Array<number>,): false | 1 | 2 {\n  const tiles: Array<Tile> = []\n  indices.forEach(index => tiles.push(grid[index]));\n\n  //check 1\n  let found = true;\n  tiles.forEach((tile) => {\n    if (tile.slotsIndex === 0) found = false;\n\n    if (!tile.value.find((item) => !item.used && item.player === 1))\n      found = false;\n  })\n  if (found) return 1;\n\n  //check 2\n  found = true;\n  tiles.forEach((tile) => {\n    if (tile.slotsIndex === 0) found = false;\n\n    if (!tile.value.find((item) => !item.used && item.player === 2))\n      found = false;\n  })\n  if (found) return 2;\n\n\n  return false;\n}\n\nfunction getWinner(state: BoardState): false | 1 | 2 {\n  if (state.score.p1.length >= SCORE_TO_WIN)\n    return 1;\n  else if (state.score.p2.length >= SCORE_TO_WIN)\n    return 2\n  else return false;\n}\n\nexport function getSymbol(player: 1 | 2): string {\n  if (player === 1) return 'ðŸŸ¡';\n  else if (player === 2) return 'ðŸ”µ';\n  else return '?';\n}","import React from 'react';\nimport styles from './Board.module.css';\nimport { ActionCreators } from 'redux-undo';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport { reset } from './boardSlice';\n\nexport function Control() {\n    const dispatch = useAppDispatch();\n    const canUndo: boolean = useAppSelector((state) => state.board.past.length > 0);\n    const canRedo: boolean = useAppSelector((state) => state.board.future.length > 0);\n    return (\n        <div className={styles.controlBar}>\n            <button\n                className={styles.controlButton}\n                onClick={() => dispatch(ActionCreators.undo())}\n                disabled={!canUndo}\n            >\n                <div className={styles.controlButtonInside}>undo</div>\n            </button>\n            <div className={styles.controlButtonContainer}>\n                <button\n                    className={styles.controlButton}\n                    onClick={() => dispatch(ActionCreators.redo())}\n                    disabled={!canRedo}\n                >\n                    <div className={styles.controlButtonInside}>redo</div>\n                </button>\n            </div>\n            <div className={styles.controlButtonContainer}>\n                <button className={styles.controlButton} onClick={() => dispatch(reset(Math.random() > 0.5 ? 1 : 2))}>\n                    <div className={styles.controlButtonInside}>reset</div>\n                </button>\n            </div>\n        </div>\n    );\n}\n","import React, { useRef, useEffect } from 'react';\nimport { useAppSelector } from '../../app/hooks';\nimport styles from './Lines.module.css';\n\nconst H = 1000;\nconst W = 1000;\n\nexport type Direction = 'tr' | 'mr' | 'br' | 'lc' | 'mc' | 'rc' | 'brtl' | 'bltr';\n\ninterface DirectionLines {\n  tr: { pt1: [-1, -1]; pt2: [1, -1]; values: Array<1 | 2> };\n  mr: { pt1: [-1, 0]; pt2: [1, 0]; values: Array<1 | 2> };\n  br: { pt1: [-1, 1]; pt2: [1, 1]; values: Array<1 | 2> };\n  lc: { pt1: [-1, -1]; pt2: [-1, 1]; values: Array<1 | 2> };\n  mc: { pt1: [0, -1]; pt2: [0, 1]; values: Array<1 | 2> };\n  rc: { pt1: [1, -1]; pt2: [1, 1]; values: Array<1 | 2> };\n  bltr: { pt1: [-1, 1]; pt2: [1, -1]; values: Array<1 | 2> };\n  brtl: { pt1: [-1, -1]; pt2: [1, 1]; values: Array<1 | 2> };\n}\n\nconst COEF: number = 365;\nfunction sortLines(p1: Array<Direction>, p2: Array<Direction>): DirectionLines {\n  const sorted: DirectionLines = {\n    tr: { pt1: [-1, -1], pt2: [1, -1], values: [] },\n    mr: { pt1: [-1, 0], pt2: [1, 0], values: [] },\n    br: { pt1: [-1, 1], pt2: [1, 1], values: [] },\n    lc: { pt1: [-1, -1], pt2: [-1, 1], values: [] },\n    mc: { pt1: [0, -1], pt2: [0, 1], values: [] },\n    rc: { pt1: [1, -1], pt2: [1, 1], values: [] },\n    bltr: { pt1: [-1, 1], pt2: [1, -1], values: [] },\n    brtl: { pt1: [-1, -1], pt2: [1, 1], values: [] },\n  };\n\n  p1.forEach((line: Direction) => {\n    sorted[line].values.push(1);\n  });\n  p2.forEach((line: Direction) => {\n    sorted[line].values.push(2);\n  });\n  return sorted;\n}\n\nexport function Lines() {\n  const p1 = useAppSelector((state) => state.board.present.score.p1);\n  const p2 = useAppSelector((state) => state.board.present.score.p2);\n  const lines = sortLines(p1, p2);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    if (!canvasRef.current) return;\n    const canvas: HTMLCanvasElement = canvasRef.current;\n    const c = canvas.getContext('2d');\n    if (!c) return;\n    c.clearRect(0, 0, H, W);\n\n    Object.keys(lines).forEach((dir): void => {\n      const { pt1, pt2, values } = lines[dir as Direction];\n      let [x1, y1] = pt1 as Array<number>;\n      let [x2, y2] = pt2 as Array<number>;\n      [x1, y1, x2, y2] = [x1 * COEF + W / 2, y1 * COEF + H / 2, x2 * COEF + W / 2, y2 * COEF + H / 2];\n\n      const delta = 40;\n\n      values.forEach((elem, index) => {\n        c.beginPath();\n        c.moveTo(\n          x1 + (index - (values.length === 1 ? 0 : 1)) * delta * (dir === 'brtl' ? -1 : 1),\n          y1 + (index - (values.length === 1 ? 0 : 1)) * delta,\n        );\n        c.lineWidth = 30;\n        c.strokeStyle = elem === 1 ? '#FFF100' : '#0078D7';\n        c.lineTo(\n          x2 + (index - (values.length === 1 ? 0 : 1)) * delta * (dir === 'brtl' ? -1 : 1),\n          y2 + (index - (values.length === 1 ? 0 : 1)) * delta,\n        );\n        c.closePath();\n        c.stroke();\n      });\n    });\n  });\n  return <canvas ref={canvasRef} className={styles.canvas} height={H} width={W} />;\n}\n","import React from 'react';\nimport styles from './Board.module.css';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\nimport { selectGrid, Tile, playAt, getSymbol } from './boardSlice';\nimport { Control } from './Control';\nimport { Lines } from './Lines';\n\nexport function Board() {\n  const dispatch = useAppDispatch();\n  const grid = useAppSelector(selectGrid);\n  const turn = useAppSelector((state) => state.board.present.turn);\n  const winner = useAppSelector((state) => state.board.present.winner);\n\n  const header = winner ? (\n    <h1 className={styles.header + ' ' + styles.winning}> Winner is {getSymbol(winner)}</h1>\n  ) : turn === 1 ? (\n    <h1 className={styles.header}>Player {getSymbol(1)} turn</h1>\n  ) : (\n    <h1 className={styles.header}>Player {getSymbol(2)} turn</h1>\n  );\n\n  const tiles = grid.map((tile: Tile, index: number) => {\n    const items = tile.value.map((item, subIndex) => (\n      <div className={styles.item + ' ' + (item.used ? styles.used : '')} key={index + subIndex}>\n        {getSymbol(item.player)}\n      </div>\n    ));\n    return (\n      <div\n        key={index}\n        className={styles.cell + ' ' + (tile.value.length < 3 ? styles.notfull : '')}\n        onClick={() => {\n          if (!winner) dispatch(playAt(index));\n        }}\n      >\n        <div className={styles.under}></div>\n        <div className={styles.upper}>\n          <div className={styles.inside}>{items}</div>\n        </div>\n      </div>\n    );\n  });\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.subHeader}>Make 3 lines to win</div>\n      {header}\n      <div className={styles.grid}>\n        <Lines />\n        {tiles}\n      </div>\n      <Control />\n    </div>\n  );\n}\n","import React from 'react';\nimport { useAppSelector } from '../../app/hooks';\nimport { getSymbol } from './boardSlice';\nimport styles from './Board.module.css';\n\nexport function Score(props: { player: 1 | 2 }) {\n    const score = useAppSelector((state) =>\n        props.player === 1 ? state.board.present.score.p1.length : state.board.present.score.p2.length,\n    );\n\n    return (\n        <div className={styles.scoreContainer}>\n            <div className={styles.scoreHeader}>{getSymbol(props.player)}</div>\n            <div className={styles.scoreHeader}>{score}</div>\n        </div>\n    );\n}\n","import React from 'react';\nimport { Board } from './features/board/Board';\nimport { Score } from './features/board/Score';\nimport './App.css';\n\nfunction App() {\n    return (\n        <div className='App'>\n            <Score player={1} />\n            <Board />\n            <Score player={2} />\n        </div>\n    );\n}\n\nexport default App;\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\nimport boardReducer from '../features/board/boardSlice';\nimport undoable from 'redux-undo';\n\nexport const store = configureStore({\n  reducer: {\n    board: undoable(boardReducer),\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { store } from './app/store';\nimport { Provider } from 'react-redux';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}